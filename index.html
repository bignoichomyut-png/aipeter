<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Design Studio - แพลตฟอร์มสร้างโค้ดและดีไซน์</title>
    <!-- โหลด Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* [FIXED]: เปลี่ยนฟอนต์หลักเป็น LINE Seed Sans TH */
        /* กรุณาเพิ่มโค้ดอิมพอร์ตฟอนต์ LINE Seed Sans TH ที่นี่ */
        /* ตัวอย่าง: @import url('URL_สำหรับ_LINE_Seed_Sans_TH'); */
        body {
            font-family: 'LINE Seed Sans TH', sans-serif;
            /* ปรับพื้นหลังให้ดูนุ่มนวลขึ้นตามภาพตัวอย่าง */
            background-color: #f0f2f5; 
            /* Fix: Ensure body doesn't cause extra scroll */
            overflow: hidden;
        }

        /* กำหนดสีหลักสำหรับ Tailwind Custom Colors */
        .text-primary-teal { color: #37B2B5; }
        .bg-primary-teal { background-color: #37B2B5; }
        .hover\:bg-dark-teal:hover { background-color: #2A9B9E; }
        .hover\:text-primary-teal:hover { color: #37B2B5; }
        .bg-light-teal { background-color: #E0F7F7; }

        /* FIX: Main container height calculation to prevent overflow caused by m-8 (32px top + 32px bottom = 64px or 4rem) */
        .main-card {
            height: calc(100vh - 4rem);
        }

        /* Custom scrollbar for better aesthetics */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background-color: transparent;
        }
        
        /* Custom Flex Class: L3 will be twice as wide as L2 (2:1 ratio of remaining space) */
        .flex-2 {
            flex: 2 1 0%;
        }

        /* สไตล์ไอคอนเมนู */
        .menu-item {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.15s;
        }
        .menu-item:hover {
            background-color: #f7f9fb; /* พื้นหลังสีขาวนวลเมื่อโฮเวอร์ */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        /* สไตล์สำหรับเมนูที่ Active */
        .menu-item.active {
            background-color: white; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
        }

        /* --- CSS สำหรับเอฟเฟกต์ไฟนีออนรอบไอคอนเมนู --- */
        .icon-glow-wrapper {
            position: relative;
            padding: 4px; 
            border-radius: 50%;
            transition: box-shadow 0.3s ease-in-out, transform 0.15s;
            line-height: 0;
        }

        .menu-item:hover .icon-glow-wrapper,
        .menu-item.active .icon-glow-wrapper {
            /* เอฟเฟกต์ Neon Glow สี Teal (#37B2B5) */
            box-shadow: 0 0 8px rgba(55, 178, 181, 0.7),
                        0 0 15px rgba(55, 178, 181, 0.4),
                        0 0 25px rgba(55, 178, 181, 0.2);
            transform: scale(1.1);
        }

        /* --- Custom Glow for Layout 3 Header Controls (Copy Button and Active Tab) --- */
        .header-control-glow {
            transition: all 0.2s ease-in-out;
        }

        /* Copy Button Hover/Active (Retained for Copy Button) */
        .header-control-glow:hover,
        #copy-button.active {
            transform: scale(1.08); 
            box-shadow: 0 0 8px rgba(55, 178, 181, 0.5),
                        0 0 12px rgba(55, 178, 181, 0.3);
        }

        /* NEW: Glow applied to the tab container */
        #tab-group-container.active-group {
            /* Simulating a contained 'running border' glow */
            box-shadow: 0 0 12px rgba(55, 178, 181, 0.6),
                        0 0 20px rgba(55, 178, 181, 0.3);
            background-color: #f7f9fb; /* Slight background hint for the group area */
        }
        
        /* NEW: Base style for tab items to ensure consistent sizing/appearance */
        .tab-item {
            transform: none; /* Remove previous scale transforms */
            box-shadow: none; /* Remove previous shadows */
            border: 2px solid transparent; /* Ensure border is reserved for active state */
        }

        /* NEW: Active Tab Item Style (No solid background, just border/text color) */
        .tab-item.active-tab {
            background-color: transparent !important; /* Remove solid background */
            color: #37B2B5 !important; /* Teal text color */
            border: 2px solid #37B2B5; /* Use a thin primary border */
            font-weight: 600; /* semi-bold */
        }

        /* NEW: Inactive Tab Item Style */
        .tab-item.inactive-tab {
            background-color: #f0f4f7; /* Light neutral background for inactive */
            color: #4b5563; /* Gray text color */
            border-color: transparent;
        }


        /* --- Custom Tech Input Glow Focus --- */
        .tech-input:focus {
            outline: none;
            border-color: #37B2B5; 
            /* เอฟเฟกต์ Neon Glow Ring */
            box-shadow: 0 0 0 3px rgba(55, 178, 181, 0.5); 
        }

        /* Container สำหรับ Textarea และปุ่มส่ง (เพื่อให้ปุ่มอยู่ด้านใน) */
        .input-container {
            position: relative;
            width: 100%;
        }

        /* [FIX]: Textarea ที่ต้องเว้นพื้นที่สำหรับปุ่มส่ง (ปรับเป็น 4rem) */
        .input-container textarea {
            padding-right: 4rem; 
        }

        /* ปุ่มส่งที่ลอยอยู่ด้านใน Textarea: ปรับให้จัดกึ่งกลางแนวตั้งและกลม */
        .send-button-inside {
            position: absolute;
            /* [FIX]: ปรับตำแหน่งด้านขวาเพื่อความสมดุล */
            right: 0.75rem; 
            /* [Centering Logic] ใช้ top: 50% และ transform: translateY(-50%) เพื่อจัดกึ่งกลางแนวตั้ง */
            top: 50%;
            transform: translateY(-50%);
            /* [FIX]: ลดขนาดปุ่มลง 30% (จาก 2.5rem เป็น 1.75rem) */
            height: 1.75rem; 
            width: 1.75rem; 
            transition: all 0.2s ease-in-out;
        }
        
        /* เอฟเฟกต์ Neon Glow เมื่อคลิก/แตะ (Active state) */
        .send-button-inside:active {
            /* เพิ่ม Neon Glow Effect */
            box-shadow: 0 0 10px rgba(83, 212, 214, 0.9),
                        0 0 20px rgba(55, 178, 181, 0.6);
            transform: translateY(-50%) scale(0.95); /* ย่อลงเล็กน้อยเมื่อกด */
        }

    </style>
</head>
<body class="overflow-hidden">

    <!-- คอนเทนเนอร์หลัก: ปรับเป็น card ลอยตัว (rounded-xl, shadow-2xl) และใช้ bg-white ที่ด้านใน -->
    <!-- FIX: เปลี่ยน h-screen เป็น main-card เพื่อคำนวณความสูงให้พอดีกับ m-8 margin -->
    <div class="flex bg-white text-gray-800 m-8 rounded-2xl shadow-2xl overflow-hidden main-card">

        <!-- Layout 1: แถบเครื่องมือ/เมนู (Fixed 80px - เท่ากับขนาดไอคอน) -->
        <!-- REMOVED: border-r border-gray-200 -->
        <div id="sidebar" class="flex-shrink-0 bg-white w-[80px] rounded-l-2xl">
            <!-- Header: แสดงแค่ 'AI' ในโหมดไอคอน (h-20) -->
            <div class="p-4 border-b border-gray-200 h-20 flex items-center justify-center">
                <h1 class="text-3xl font-bold text-gray-800">AI</h1>
            </div>
            <nav class="p-2 space-y-4">
                <!-- 1. สร้างโค้ดใหม่ (New Code - Happy Document) -->
                <!-- ADDED ID for JS targeting -->
                <a href="#" title="สร้างโค้ดใหม่" class="menu-item active" id="new-code-button">
                    <div class="icon-glow-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                            <rect x="10" y="8" width="28" height="32" rx="4" fill="#E0F7F7" stroke="#37B2B5" stroke-width="2" stroke-linejoin="round"/>
                            <path d="M18 20c0 4 3 7 7 7s7-3 7-7" fill="none" stroke="#37B2B5" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="21" cy="18" r="1.5" fill="#37B2B5"/>
                            <circle cx="29" cy="18" r="1.5" fill="#37B2B5"/>
                            <path d="M18 35h12" stroke="#37B2B5" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                </a>
                
                <!-- 2. ประวัติโครงการ (Toggle Container) -->
                <div class="relative">
                    <a href="#" title="ประวัติโครงการ" class="menu-item" id="project-history-button">
                        <div class="icon-glow-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                                <path d="M10 40h28V15c0-2-1-4-3-4h-4v-4h-4v4h-4v-4h-4v4h-4c-2 0-3 2-3 4v25z" fill="#D3F3E6" stroke="#37B2B5" stroke-width="2" stroke-linejoin="round"/>
                                <rect x="15" y="24" width="4" height="16" fill="#37B2B5"/>
                                <rect x="29" y="24" width="4" height="16" fill="#37B2B5"/>
                            </svg>
                        </div>
                    </a>
                    
                    <!-- Sub-menu container for Project History -->
                    <div id="project-history-submenu" class="absolute left-[80px] top-0 z-20 bg-white border border-gray-200 rounded-xl shadow-2xl p-2 w-72 space-y-1 hidden">
                        <div class="text-xs font-semibold text-gray-500 pb-1 border-b border-gray-100 px-2 uppercase tracking-wider">โครงการที่เคยสร้าง</div>
                        
                        <!-- Project 1: Marketplace Landing (Current Design) -->
                        <a href="#" data-project="marketplace" title="Marketplace Landing Page" class="project-item flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-red-500">
                                <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4zM3 6h18M16 10a4 4 0 01-8 0"></path>
                            </svg>
                            <span class="text-sm">E-Marketplace (Landing)</span>
                        </a>

                        <!-- Project 2: Analytics Dashboard -->
                        <a href="#" data-project="dashboard" title="Analytics Dashboard" class="project-item flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-blue-500">
                                <rect x="3" y="3" width="7" height="9"></rect>
                                <rect x="14" y="3" width="7" height="5"></rect>
                                <rect x="14" y="12" width="7" height="9"></rect>
                                <rect x="3" y="16" width="7" height="5"></rect>
                            </svg>
                            <span class="text-sm">Minimal Analytics Dashboard</span>
                        </a>

                        <!-- Project 3: Blog Post Article -->
                        <a href="#" data-project="blog" title="Blog Post Article" class="project-item flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-green-500">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                            </svg>
                            <span class="text-sm">Minimal Blog Article</span>
                        </a>
                    </div>
                </div>

                <!-- 3. การตั้งค่า AI (Toggle Container) -->
                <div class="relative">
                    <a href="#" title="การตั้งค่า AI" class="menu-item" id="ai-settings-button">
                        <div class="icon-glow-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                                <circle cx="24" cy="24" r="14" fill="#EBF4FF" stroke="#5d9ee7" stroke-width="2"/>
                                <circle cx="24" cy="24" r="7" fill="#5d9ee7"/>
                                <path d="M24 4V10M38 12L34 16M44 24H38M38 36L34 32M24 44V38M10 36L14 32M4 24H10M10 12L14 16" stroke="#5d9ee7" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </a>

                    <!-- Sub-menu container for AI Settings -->
                    <div id="ai-settings-submenu" class="absolute left-[80px] top-0 z-20 bg-white border border-gray-200 rounded-xl shadow-2xl p-2 w-48 space-y-1 hidden">
                        <div class="text-xs font-semibold text-gray-500 pb-1 border-b border-gray-100 px-2 uppercase tracking-wider">เครื่องมือผู้ช่วย</div>
                        
                        <!-- 3a. สี (Color) -->
                        <a href="#" title="สี" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 mr-3 text-pink-500">
                                <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z" clip-rule="evenodd" />
                            </svg>
                            <span class="text-sm">สี (Color)</span>
                        </a>
                        
                        <!-- 3b. สไตล์เว็บ (Web Style) -->
                        <a href="#" title="สไตล์เว็บ" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-blue-500">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                            <span class="text-sm">สไตล์เว็บ (Web Style)</span>
                        </a>
                        
                        <!-- 3c. เอฟเฟค (Effect) -->
                        <a href="#" title="เอฟเฟค" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 mr-3 text-yellow-500">
                                <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.234.98-.705 1.767-1.536 1.284l-4.733-2.887-4.733 2.887c-.831.483-1.77-.297-1.536-1.284l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.007z" clip-rule="evenodd" />
                            </svg>
                            <span class="text-sm">เอฟเฟค (Effect)</span>
                        </a>

                        <!-- 3d. ไอคอน (Icon) -->
                        <a href="#" title="ไอคอน" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-red-500">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="9" y1="3" x2="9" y2="21"></line>
                                <line x1="15" y1="3" x2="15" y2="21"></line>
                                <line x1="3" y1="9" x2="21" y2="9"></line>
                                <line x1="3" y1="15" x2="21" y2="15"></line>
                            </svg>
                            <span class="text-sm">ไอคอน (Icon)</span>
                        </a>

                        <!-- 3e. ฟ้อน (Font) -->
                        <a href="#" title="ฟ้อน" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-green-500">
                                <path d="M4 7V4h16v3M9 20h6M12 4v16"></path>
                            </svg>
                            <span class="text-sm">ฟ้อน (Font)</span>
                        </a>
                    </div>
                </div>
                
                <!-- 4. เทมเพลตดีไซน์ (Toggle Container) - ADDED NEW MENU -->
                <div class="relative">
                    <a href="#" title="เทมเพลตดีไซน์" class="menu-item" id="design-templates-button">
                        <div class="icon-glow-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                                <circle cx="24" cy="24" r="18" fill="#D3F3E6" stroke="#37B2B5" stroke-width="2"/>
                                <path d="M24 16c2 0 4 1 4 3 0 2-1 3-2 4s-2 2-2 4M24 33h.01" stroke="#37B2B5" stroke-width="3" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </a>

                    <!-- NEW: Sub-menu container for Design Templates -->
                    <div id="design-templates-submenu" class="absolute left-[80px] top-0 z-20 bg-white border border-gray-200 rounded-xl shadow-2xl p-2 w-64 space-y-1 hidden">
                        <div class="text-xs font-semibold text-gray-500 pb-1 border-b border-gray-100 px-2 uppercase tracking-wider">ตัวอย่างดีไซน์เทมเพลต</div>
                        
                        <!-- 4a. หน้าสินค้าอีคอมเมิร์ซ (E-commerce Product Page) -->
                        <a href="#" title="หน้าสินค้าอีคอมเมิร์ซ" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-red-500">
                                <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4zM3 6h18M16 10a4 4 0 01-8 0"></path>
                            </svg>
                            <span class="text-sm">E-commerce Product Page</span>
                        </a>
                        
                        <!-- 4b. เลย์เอาต์บทความบล็อก (Blog Post Layout) -->
                        <a href="#" title="เลย์เอาต์บทความบล็อก" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-blue-500">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                            </svg>
                            <span class="text-sm">Blog Post Layout</span>
                        </a>

                        <!-- 4c. แดชบอร์ดสมัยใหม่ (Modern Dashboard) -->
                        <a href="#" title="แดชบอร์ดสมัยใหม่" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-green-500">
                                <rect x="3" y="3" width="7" height="9"></rect>
                                <rect x="14" y="3" width="7" height="5"></rect>
                                <rect x="14" y="12" width="7" height="9"></rect>
                                <rect x="3" y="16" width="7" height="5"></rect>
                            </svg>
                            <span class="text-sm">Modern Dashboard</span>
                        </a>

                        <!-- 4d. หน้าแรกแบบมินิมอล (Landing Page Minimal) -->
                        <a href="#" title="หน้าแรกแบบมินิมอล" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-yellow-600">
                                <path d="M3 3h18v18H3V3zm12 3H9v12h6V6z"></path>
                            </svg>
                            <span class="text-sm">Landing Page (Minimal)</span>
                        </a>

                        <!-- 4e. ตารางจัดแสดงผลงาน (Portfolio Grid) -->
                        <a href="#" title="ตารางจัดแสดงผลงาน" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-purple-500">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            <span class="text-sm">Portfolio Grid</span>
                        </a>
                    </div>
                </div>
                
                <!-- 5. คู่มือการใช้งาน (Toggle Container) -->
                <div class="relative">
                    <a href="#" title="คู่มือการใช้งาน" class="menu-item" id="user-manual-button">
                        <div class="icon-glow-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                                <path d="M24 4c-5 0-9 4-9 9 0 4 3 7 3 9v7h12v-7c0-2 3-5 3-9 0-5-4-9-9-9z" fill="#FDE0C4" stroke="#F7A823" stroke-width="2" stroke-linejoin="round"/>
                                <rect x="20" y="32" width="8" height="6" fill="#FDE0C4" stroke="#F7A823" stroke-width="2" stroke-linejoin="round"/>
                                <rect x="21" y="38" width="6" height="4" fill="#FDE0C4" stroke="#F7A823" stroke-width="2" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </a>

                    <!-- NEW: Sub-menu container for User Manual -->
                    <div id="user-manual-submenu" class="absolute left-[80px] top-0 z-20 bg-white border border-gray-200 rounded-xl shadow-2xl p-2 w-48 space-y-1 hidden">
                        <div class="text-xs font-semibold text-gray-500 pb-1 border-b border-gray-100 px-2 uppercase tracking-wider">คู่มือการใช้งาน</div>
                        
                        <!-- 5a. เมนูย่อย 1: คู่มือเริ่มต้นการใช้งาน -->
                        <a href="#" title="คู่มือเริ่มต้นการใช้งาน" class="flex items-center p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-3 text-yellow-600">
                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                            </svg>
                            <span class="text-sm">คู่มือเริ่มต้นการใช้งาน</span>
                        </a>
                    </div>
                </div>
                
                <!-- 6. ออกจากระบบ (Logout - Hand/Palm) -->
                <!-- ADDED ID for JS targeting -->
                <a href="#" title="ออกจากระบบ" class="menu-item" id="logout-button">
                    <div class="icon-glow-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-8 h-8">
                            <path d="M24 42c-7 0-11-4-11-10s4-10 11-10 11 4 11 10-4 10-11 10z" fill="#FBE0C4" stroke="#F7A823" stroke-width="2"/>
                            <path d="M24 12v-8m-7 8l-3-5m14 5l3-5" stroke="#F7A823" stroke-width="2" stroke-linecap="round"/>
                            <path d="M34 26c-2 2-5 3-8 3s-6-1-8-3" fill="none" stroke="#F7A823" stroke-width="2" stroke-linecap="round"/>
                            <path d="M24 32c-3 0-5-2-5-5s2-5 5-5 5 2 5 5-2 5-5 5z" fill="#FDE0C4" stroke="#F7A823" stroke-width="2"/>
                        </svg>
                    </div>
                </a>
            </nav>
        </div>
        
        <!-- คอนเทนเนอร์สำหรับ Layout 2 (Chat) และ Layout 3 (Code/Preview) -->
        <div class="flex flex-1 min-w-0">

            <!-- Layout 2: ช่องแชทสำหรับใส่คำสั่ง AI (1 ส่วนของพื้นที่ที่เหลือ) -->
            <!-- REMOVED: border-r border-gray-200 -->
            <div id="chat-panel" class="flex flex-col flex-1 bg-white custom-scroll overflow-y-auto min-w-0">
                <!-- Header (h-20) -->
                <header class="p-4 border-b border-gray-200 sticky top-0 bg-white z-10 shadow-sm h-20 flex flex-col justify-center">
                    <h2 class="text-lg font-semibold text-gray-800">ช่องสั่งงาน AI</h2>
                    <p class="text-sm text-gray-500">พิมพ์คำสั่งของคุณเพื่อสร้างโค้ดหรือดีไซน์</p>
                </header>

                <!-- ส่วนแสดงประวัติการสนทนา (จำลอง) -->
                <div class="flex-1 p-6 space-y-4 custom-scroll overflow-y-auto">
                    <!-- ข้อความต้อนรับ AI: ปรับโค้งมนและ max-width -->
                    <!-- UPDATED CONTENT -->
                    <div class="flex justify-start">
                        <div class="max-w-sm md:max-w-lg p-4 bg-light-teal text-[#1A7B7E] rounded-3xl rounded-tl-lg shadow-md">
                            <p class="font-bold">AI Helper</p>
                            <p class="text-sm">สวัสดีครับ! ผมพร้อมที่จะช่วยออกแบบเว็บไซต์ E-Marketplace สไตล์โมเดิร์นและมินิมอลให้คุณแล้วครับ คุณต้องการเริ่มจากส่วนไหนดีครับ?</p>
                        </div>
                    </div>
                    <!-- ข้อความจำลองจากผู้ใช้: ปรับโค้งมนและ max-w -->
                    <!-- UPDATED CONTENT -->
                    <div class="flex justify-end">
                        <div class="max-w-sm md:max-w-lg p-4 bg-primary-teal text-white rounded-3xl rounded-br-lg shadow-xl">
                            <p class="text-sm">ช่วยออกแบบหน้าแรกของ MarketPlace ที่เน้นสินค้าพรีเมียม, ใช้โทนสีขาว/เทา/ดำ และมีเลย์เอาต์แบบกริดที่ดูสะอาดตา</p>
                        </div>
                    </div>
                    <!-- การตอบกลับโค้ดจำลองจาก AI: ปรับโค้งมนและ max-width -->
                    <!-- UPDATED CONTENT -->
                    <div class="flex justify-start">
                        <div class="max-w-sm md:max-w-lg p-4 bg-light-teal text-[#1A7B7E] rounded-3xl rounded-tl-lg shadow-md">
                            <p class="font-bold">AI Helper</p>
                            <p class="text-sm">รับทราบครับ! นี่คือโค้ด HTML/Tailwind สำหรับหน้าแรก MarketPlace ที่เน้นความโมเดิร์นและมินิมอลครับ ลองดูผลลัพธ์ในแท็บแสดงดีไซน์ได้เลยครับ</p>
                        </div>
                    </div>
                </div>

                <!-- ช่องสำหรับป้อนคำสั่งใหม่ (Tech Card Style) -->
                <footer class="p-4 border-t border-gray-200 bg-white shadow-lg">
                    <!-- FIX: ลบ flex items-center space-x-3 ออก และใช้ input-container แทน -->
                    <div class="input-container">
                        <!-- Textarea: ใช้ tech-input สำหรับเอฟเฟกต์ Glow Focus และเว้น padding-right -->
                        <textarea id="prompt-input" rows="2" class="w-full p-3 border-2 border-gray-300 rounded-lg transition duration-150 resize-none shadow-inner tech-input" placeholder="พิมพ์คำสั่งเพื่อสร้างโค้ด..."></textarea>
                        
                        <!-- Send Button: ลอยอยู่ด้านใน Textarea, ปรับให้เป็น rounded-full -->
                        <button id="send-button" class="send-button-inside flex items-center justify-center bg-gradient-to-r from-[#53D4D6] to-[#37B2B5] text-white font-semibold rounded-full shadow-lg hover:from-[#37B2B5] hover:to-[#2A9B9E] transition duration-300 transform hover:scale-[1.05]">
                            <!-- [FIX]: ลดขนาดไอคอน SVG ภายในปุ่มลงให้สมส่วน (จาก w-6 h-6 เป็น w-4 h-4) -->
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </footer>
            </div>

            <!-- Layout 3: แสดงผลโค้ด/ดีไซน์ (2 ส่วนของพื้นที่ที่เหลือ - กว้างกว่า L2 สองเท่า) -->
            <div id="output-panel" class="flex flex-col flex-2 bg-gray-900 min-w-0 rounded-r-2xl overflow-hidden">
                <!-- Header (h-20) -->
                <header class="p-4 bg-white border-b border-gray-200 flex items-center justify-between h-20 rounded-tr-2xl">
                    <h2 class="text-lg font-semibold text-gray-800">แสดงผลลัพธ์</h2>
                    <!-- Controls (Copy Button & Tabs) -->
                    <div class="flex items-center space-x-4">
                        <!-- NEW: Copy Button -->
                        <!-- The copy button glow remains individual -->
                        <button id="copy-button" title="คัดลอกโค้ด" class="header-control-glow flex items-center justify-center p-2 text-sm font-medium rounded-full bg-gray-100 text-gray-600 transition duration-150 transform">
                            <svg id="copy-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <!-- Clipboard Icon -->
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-2m-4-4l-4-4m0 0l-4 4m4-4v12"></path>
                            </svg>
                        </button>
                        <!-- Tabs Group - ADDED: p-1 for glow spacing, transition for effect -->
                        <div id="tab-group-container" class="flex space-x-2 p-1 rounded-full transition duration-300">
                            <!-- Tab 1: Code -->
                            <button id="tab-code" class="tab-item px-4 py-1.5 text-sm font-medium rounded-full transition duration-150">
                                โค้ดที่สร้าง (HTML)
                            </button>
                            <!-- Tab 2: Preview -->
                            <button id="tab-preview" class="tab-item px-4 py-1.5 text-sm font-medium rounded-full transition duration-150">
                                แสดงดีไซน์ (Preview)
                            </button>
                        </div>
                    </div>
                </header>

                <!-- ส่วนแสดงโค้ด (เริ่มต้น) -->
                <div id="view-code" class="flex-1 p-4 overflow-y-auto custom-scroll text-sm text-green-300 bg-gray-900 font-mono">
                    <pre>
                        <!-- ADDED ID for JS targeting -->
                        <code id="code-content">&lt;!-- E-Marketplace Hero and Product Grid (Modern Minimalist) --&gt;
&lt;div class="p-8 bg-white min-h-screen"&gt;
    &lt;!-- Hero Section --&gt;
    &lt;header class="text-center mb-12"&gt;
        &lt;p class="text-sm uppercase tracking-widest text-gray-500"&gt;Curated Goods&lt;/p&gt;
        &lt;h1 class="text-5xl font-extrabold text-gray-900 mt-2"&gt;The Minimalist Collection&lt;/h1&gt;
        &lt;p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto"&gt;พบกับสินค้าคุณภาพเยี่ยมที่คัดสรรมาอย่างพิถีพิถัน ด้วยดีไซน์ที่เรียบง่ายและทันสมัย&lt;/p&gt;
    &lt;/header&gt;

    &lt;!-- Product Grid --&gt;
    &lt;div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"&gt;
        &lt;!-- Product Card 1 (Minimalist Desk Lamp) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;!-- UPDATED: Using a reliable minimalist placeholder URL --&gt;
            &lt;img src="https://placehold.co/400x400/D1D5DB/1F2937?text=Minimalist+Lamp" onerror="this.src='https://placehold.co/400x400/1f2937/ffffff?text=Product+A'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Minimalist Desk Lamp&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Lighting&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;4,990 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 2 (Ceramic Coffee Mug) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;!-- UPDATED: Using a reliable minimalist placeholder URL --&gt;
            &lt;img src="https://placehold.co/400x400/E5E7EB/4B5563?text=Ceramic+Mug" onerror="this.src='https://placehold.co/400x400/4b5563/ffffff?text=Product+B'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Ceramic Coffee Mug&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Kitchenware&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;750 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 3 (Leather Wallet) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;!-- UPDATED: Using a reliable minimalist placeholder URL --&gt;
            &lt;img src="https://placehold.co/400x400/9CA3AF/FFFFFF?text=Leather+Wallet" onerror="this.src='https://placehold.co/400x400/9ca3af/ffffff?text=Product+C'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Leather Wallet&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Accessories&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;2,100 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 4 (Noise-Cancelling Earbuds) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;!-- UPDATED: Using a reliable minimalist placeholder URL --&gt;
            &lt;img src="https://placehold.co/400x400/374151/FFFFFF?text=Wireless+Earbuds" onerror="this.src='https://placehold.co/400x400/d1d5db/1f2937?text=Product+D'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Noise-Cancelling Earbuds&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Electronics&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;8,500 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                </div>

                <!-- ส่วนแสดงดีไซน์กราฟิก (ซ่อนอยู่เริ่มต้น) -->
                <div id="view-preview" class="flex-1 overflow-y-auto custom-scroll p-4 bg-gray-100 hidden">
                    <!-- จำลองผลลัพธ์ดีไซน์กราฟิก (โค้ด HTML ที่สร้าง) -->
                    <!-- UPDATED CONTENT FOR PREVIEW -->
                    <div class="p-8 bg-white min-h-full">
                        <!-- Hero Section -->
                        <header class="text-center mb-12">
                            <p class="text-sm uppercase tracking-widest text-gray-500">Curated Goods</p>
                            <h1 class="text-5xl font-extrabold text-gray-900 mt-2">The Minimalist Collection</h1>
                            <p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">พบกับสินค้าคุณภาพเยี่ยมที่คัดสรรมาอย่างพิถีพิถัน ด้วยดีไซน์ที่เรียบง่ายและทันสมัย</p>
                        </header>

                        <!-- Product Grid -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                            <!-- Product Card 1 -->
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/D1D5DB/1F2937?text=Minimalist+Lamp" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Minimalist Desk Lamp</h3>
                                <p class="text-sm text-gray-500">Lighting</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">4,990 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>

                            <!-- Product Card 2 -->
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/E5E7EB/4B5563?text=Ceramic+Mug" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Ceramic Coffee Mug</h3>
                                <p class="text-sm text-gray-500">Kitchenware</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">750 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>

                            <!-- Product Card 3 -->
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/9CA3AF/FFFFFF?text=Leather+Wallet" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Leather Wallet</h3>
                                <p class="text-sm text-gray-500">Accessories</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">2,100 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>

                            <!-- Product Card 4 -->
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/374151/FFFFFF?text=Wireless+Earbuds" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Noise-Cancelling Earbuds</h3>
                                <p class="text-sm text-gray-500">Electronics</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">8,500 บาท</span>
                                    <button type="button" class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- Custom Modal Overlay (Hidden by default) -->
    <div id="custom-modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[9999] hidden flex items-center justify-center p-4">
        <div id="custom-modal" class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm transform transition duration-300 scale-100">
            <h3 id="modal-title" class="text-xl font-bold mb-4 text-gray-800"></h3>
            <p id="modal-message" class="text-gray-600 mb-6"></p>
            <div id="modal-actions" class="flex justify-end space-x-3">
                <!-- Buttons will be populated by JS -->
            </div>
        </div>
    </div>

    <script>
        const sidebar = document.getElementById('sidebar');
        const tabCode = document.getElementById('tab-code');
        const tabPreview = document.getElementById('tab-preview');
        const viewCode = document.getElementById('view-code');
        const viewPreview = document.getElementById('view-preview');
        const outputPanel = document.getElementById('output-panel');
        
        // CONSTANTS FOR LAYOUT 3
        const copyButton = document.getElementById('copy-button');
        const codeContent = document.getElementById('code-content');
        const tabGroupContainer = document.getElementById('tab-group-container'); // NEW CONTAINER
        const projectItems = document.querySelectorAll('.project-item'); // Get all new project links

        // LAYOUT 1 SUB-MENUS
        const projectHistoryButton = document.getElementById('project-history-button');
        const projectHistorySubmenu = document.getElementById('project-history-submenu');
        const aiSettingsButton = document.getElementById('ai-settings-button');
        const aiSettingsSubmenu = document.getElementById('ai-settings-submenu');
        const userManualButton = document.getElementById('user-manual-button'); 
        const userManualSubmenu = document.getElementById('user-manual-submenu'); 
        const designTemplatesButton = document.getElementById('design-templates-button');
        const designTemplatesSubmenu = document.getElementById('design-templates-submenu');

        // NEW CONSTANTS FOR MODAL
        const newCodeButton = document.getElementById('new-code-button');
        const logoutButton = document.getElementById('logout-button');
        const modalOverlay = document.getElementById('custom-modal-overlay');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalActions = document.getElementById('modal-actions');

        // --- PROJECT CONTENT DATA ---
        // Project data stored as strings to be injected into the DOM
        const projectData = {
            // 1. E-Marketplace (Current Default)
            marketplace: {
                code: `&lt;!-- E-Marketplace Hero and Product Grid (Modern Minimalist) --&gt;
&lt;div class="p-8 bg-white min-h-screen"&gt;
    &lt;!-- Hero Section --&gt;
    &lt;header class="text-center mb-12"&gt;
        &lt;p class="text-sm uppercase tracking-widest text-gray-500"&gt;Curated Goods&lt;/p&gt;
        &lt;h1 class="text-5xl font-extrabold text-gray-900 mt-2"&gt;The Minimalist Collection&lt;/h1&gt;
        &lt;p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto"&gt;พบกับสินค้าคุณภาพเยี่ยมที่คัดสรรมาอย่างพิถีพิถัน ด้วยดีไซน์ที่เรียบง่ายและทันสมัย&lt;/p&gt;
    &lt;/header&gt;

    &lt;!-- Product Grid --&gt;
    &lt;div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"&gt;
        &lt;!-- Product Card 1 (Minimalist Desk Lamp) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;img src="https://placehold.co/400x400/D1D5DB/1F2937?text=Minimalist+Lamp" onerror="this.src='https://placehold.co/400x400/1f2937/ffffff?text=Product+A'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Minimalist Desk Lamp&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Lighting&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;4,990 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 2 (Ceramic Coffee Mug) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;img src="https://placehold.co/400x400/E5E7EB/4B5563?text=Ceramic+Mug" onerror="this.src='https://placehold.co/400x400/4b5563/ffffff?text=Product+B'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Ceramic Coffee Mug&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Kitchenware&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;750 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 3 (Leather Wallet) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;img src="https://placehold.co/400x400/9CA3AF/FFFFFF?text=Leather+Wallet" onerror="this.src='https://placehold.co/400x400/9ca3af/ffffff?text=Product+C'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Leather Wallet&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Accessories&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;2,100 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Product Card 4 (Noise-Cancelling Earbuds) --&gt;
        &lt;div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300"&gt;
            &lt;img src="https://placehold.co/400x400/374151/FFFFFF?text=Wireless+Earbuds" onerror="this.src='https://placehold.co/400x400/d1d5db/1f2937?text=Product+D'" class="w-full h-auto object-cover rounded-md mb-4 aspect-square"&gt;
            &lt;h3 class="text-lg font-semibold text-gray-800"&gt;Noise-Cancelling Earbuds&lt;/h3&gt;
            &lt;p class="text-sm text-gray-500"&gt;Electronics&lt;/p&gt;
            &lt;div class="flex justify-between items-center mt-3"&gt;
                &lt;span class="text-xl font-bold text-gray-900"&gt;8,500 บาท&lt;/span&gt;
                &lt;button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition"&gt;ดูสินค้า&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;`,
                preview: `<div class="p-8 bg-white min-h-full">
                        <header class="text-center mb-12">
                            <p class="text-sm uppercase tracking-widest text-gray-500">Curated Goods</p>
                            <h1 class="text-5xl font-extrabold text-gray-900 mt-2">The Minimalist Collection</h1>
                            <p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">พบกับสินค้าคุณภาพเยี่ยมที่คัดสรรมาอย่างพิถีพิถัน ด้วยดีไซน์ที่เรียบง่ายและทันสมัย</p>
                        </header>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/D1D5DB/1F2937?text=Minimalist+Lamp" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Minimalist Desk Lamp</h3>
                                <p class="text-sm text-gray-500">Lighting</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">4,990 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/E5E7EB/4B5563?text=Ceramic+Mug" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Ceramic Coffee Mug</h3>
                                <p class="text-sm text-gray-500">Kitchenware</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">750 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/9CA3AF/FFFFFF?text=Leather+Wallet" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Leather Wallet</h3>
                                <p class="text-sm text-gray-500">Accessories</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">2,100 บาท</span>
                                    <button class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>
                            <div class="group bg-white p-4 rounded-lg border border-gray-100 shadow-md hover:shadow-xl transition duration-300">
                                <img src="https://placehold.co/400x400/374151/FFFFFF?text=Wireless+Earbuds" class="w-full h-auto object-cover rounded-md mb-4 aspect-square">
                                <h3 class="text-lg font-semibold text-gray-800">Noise-Cancelling Earbuds</h3>
                                <p class="text-sm text-gray-500">Electronics</p>
                                <div class="flex justify-between items-center mt-3">
                                    <span class="text-xl font-bold text-gray-900">8,500 บาท</span>
                                    <button type="button" class="px-3 py-1 text-sm text-primary-teal border border-primary-teal rounded-full hover:bg-primary-teal hover:text-white transition">ดูสินค้า</button>
                                </div>
                            </div>
                        </div>
                    </div>`,
            },
            // 2. Minimal Analytics Dashboard
            dashboard: {
                code: `&lt;!-- Minimal Analytics Dashboard Layout --&gt;
&lt;div class="p-8 bg-gray-50 min-h-screen"&gt;
    &lt;h1 class="text-3xl font-bold text-gray-800 mb-6"&gt;Dashboard Overview&lt;/h1&gt;
    
    &lt;!-- Stats Grid --&gt;
    &lt;div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10"&gt;
        &lt;div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100"&gt;
            &lt;p class="text-sm text-gray-500 uppercase tracking-wider"&gt;Revenue&lt;/p&gt;
            &lt;p class="text-2xl font-extrabold text-gray-900 mt-1"&gt;$12,450&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100"&gt;
            &lt;p class="text-sm text-gray-500 uppercase tracking-wider"&gt;Users&lt;/p&gt;
            &lt;p class="text-2xl font-extrabold text-gray-900 mt-1"&gt;3,210&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100"&gt;
            &lt;p class="text-sm text-gray-500 uppercase tracking-wider"&gt;Orders&lt;/p&gt;
            &lt;p class="text-2xl font-extrabold text-gray-900 mt-1"&gt;450&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100"&gt;
            &lt;p class="text-sm text-gray-500 uppercase tracking-wider"&gt;Bounce Rate&lt;/p&gt;
            &lt;p class="text-2xl font-extrabold text-gray-900 mt-1"&gt;15.3%&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- Chart and Table --&gt;
    &lt;div class="grid grid-cols-1 lg:grid-cols-3 gap-6"&gt;
        &lt;!-- Main Chart --&gt;
        &lt;div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-xl border border-gray-100"&gt;
            &lt;h2 class="text-xl font-semibold mb-4 text-gray-800"&gt;Sales Performance (Last 30 Days)&lt;/h2&gt;
            &lt;!-- Placeholder for Chart --&gt;
            &lt;div class="h-64 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 font-mono"&gt;
                [Area Chart Placeholder]
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Recent Activity / Table --&gt;
        &lt;div class="bg-white p-6 rounded-lg shadow-xl border border-gray-100"&gt;
            &lt;h2 class="text-xl font-semibold mb-4 text-gray-800"&gt;Recent Orders&lt;/h2&gt;
            &lt;ul class="space-y-3"&gt;
                &lt;li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0"&gt;
                    &lt;span class="font-medium"&gt;#ORDER-9876&lt;/span&gt;
                    &lt;span class="text-green-500 font-semibold"&gt;+$750&lt;/span&gt;
                &lt;/li&gt;
                &lt;li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0"&gt;
                    &lt;span class="font-medium"&gt;#ORDER-9875&lt;/span&gt;
                    &lt;span class="text-green-500 font-semibold"&gt;+$499&lt;/span&gt;
                &lt;/li&gt;
                &lt;li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0"&gt;
                    &lt;span class="font-medium"&gt;#ORDER-9874&lt;/span&gt;
                    &lt;span class="text-red-500 font-semibold"&gt;-$20 (Refund)&lt;/span&gt;
                &lt;/li&gt;
                &lt;li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0"&gt;
                    &lt;span class="font-medium"&gt;#ORDER-9873&lt;/span&gt;
                    &lt;span class="text-green-500 font-semibold"&gt;+$125&lt;/span&gt;
                &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;`,
                preview: `<div class="p-8 bg-gray-50 min-h-full">
                    <h1 class="text-3xl font-bold text-gray-800 mb-6">Dashboard Overview</h1>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                        <div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100">
                            <p class="text-sm text-gray-500 uppercase tracking-wider">Revenue</p>
                            <p class="text-2xl font-extrabold text-gray-900 mt-1">$12,450</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100">
                            <p class="text-sm text-gray-500 uppercase tracking-wider">Users</p>
                            <p class="text-2xl font-extrabold text-gray-900 mt-1">3,210</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100">
                            <p class="text-sm text-gray-500 uppercase tracking-wider">Orders</p>
                            <p class="text-2xl font-extrabold text-gray-900 mt-1">450</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg shadow-lg border border-gray-100">
                            <p class="text-sm text-gray-500 uppercase tracking-wider">Bounce Rate</p>
                            <p class="text-2xl font-extrabold text-gray-900 mt-1">15.3%</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-xl border border-gray-100">
                            <h2 class="text-xl font-semibold mb-4 text-gray-800">Sales Performance (Last 30 Days)</h2>
                            <div class="h-64 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 font-mono">
                                [Area Chart Placeholder]
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-xl border border-gray-100">
                            <h2 class="text-xl font-semibold mb-4 text-gray-800">Recent Orders</h2>
                            <ul class="space-y-3">
                                <li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0">
                                    <span class="font-medium">#ORDER-9876</span>
                                    <span class="text-green-500 font-semibold">+$750</span>
                                </li>
                                <li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0">
                                    <span class="font-medium">#ORDER-9875</span>
                                    <span class="text-green-500 font-semibold">+$499</span>
                                </li>
                                <li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0">
                                    <span class="font-medium">#ORDER-9874</span>
                                    <span class="text-red-500 font-semibold">-$20 (Refund)</span>
                                </li>
                                <li class="flex justify-between items-center text-sm border-b pb-2 last:border-b-0">
                                    <span class="font-medium">#ORDER-9873</span>
                                    <span class="text-green-500 font-semibold">+$125</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>`,
            },
            // 3. Minimal Blog Post Article
            blog: {
                code: `&lt;!-- Minimal Blog Post Article Layout --&gt;
&lt;div class="p-8 bg-white min-h-screen flex justify-center"&gt;
    &lt;div class="max-w-3xl w-full"&gt;
        &lt;header class="text-center mb-10"&gt;
            &lt;p class="text-sm uppercase tracking-widest text-primary-teal font-semibold"&gt;Design &amp; Technology&lt;/p&gt;
            &lt;h1 class="text-4xl font-extrabold text-gray-900 mt-2 leading-tight"&gt;Why Minimalist Design Still Wins in 2025&lt;/h1&gt;
            &lt;p class="text-base text-gray-500 mt-3"&gt;By Jane Doe | October 26, 2025 | 8 min read&lt;/p&gt;
        &lt;/header&gt;

        &lt;!-- Featured Image Placeholder --&gt;
        &lt;img src="https://placehold.co/1200x500/F3F4F6/9CA3AF?text=Featured+Article+Image" class="w-full h-auto object-cover rounded-lg mb-8 shadow-lg"&gt;

        &lt;!-- Content Body --&gt;
        &lt;article class="text-gray-700 leading-relaxed text-lg space-y-6"&gt;
            &lt;p&gt;Minimalism, at its core, is the art of knowing what to leave out, not what to put in. In the digital realm, this philosophy translates to cleaner interfaces, faster load times, and crucially, better user focus. We often see complex designs cluttering the user experience...&lt;/p&gt;
            
            &lt;blockquote class="border-l-4 border-primary-teal pl-4 italic text-gray-600 my-8"&gt;
                "Simplicity is the ultimate sophistication." - Leonardo da Vinci
            &lt;/blockquote&gt;
            
            &lt;h2 class="text-2xl font-bold text-gray-900 pt-4"&gt;The Power of Negative Space&lt;/h2&gt;
            &lt;p&gt;Whitespace, or negative space, is not wasted space. It is a design element that gives your content room to breathe. When building interfaces, generous padding and clear visual hierarchy guide the user effortlessly through the information.&lt;/p&gt;

            &lt;ul class="list-disc list-inside space-y-2 pl-4"&gt;
                &lt;li&gt;Improved Readability and Scannability.&lt;/li&gt;
                &lt;li&gt;Higher perceived quality of content.&lt;/li&gt;
                &lt;li&gt;Reduced cognitive load for the user.&lt;/li&gt;
            &lt;/ul&gt;
            
            &lt;p&gt;Ultimately, successful minimalist design is about prioritization. It forces us to ask: what is the single most important action or piece of information on this screen?&lt;/p&gt;
        &lt;/article&gt;
    &lt;/div&gt;
&lt;/div&gt;`,
                preview: `<div class="p-8 bg-white min-h-full flex justify-center">
                    <div class="max-w-3xl w-full">
                        <header class="text-center mb-10">
                            <p class="text-sm uppercase tracking-widest text-primary-teal font-semibold">Design & Technology</p>
                            <h1 class="text-4xl font-extrabold text-gray-900 mt-2 leading-tight">Why Minimalist Design Still Wins in 2025</h1>
                            <p class="text-base text-gray-500 mt-3">By Jane Doe | October 26, 2025 | 8 min read</p>
                        </header>
                        <img src="https://placehold.co/1200x500/F3F4F6/9CA3AF?text=Featured+Article+Image" class="w-full h-auto object-cover rounded-lg mb-8 shadow-lg">
                        <article class="text-gray-700 leading-relaxed text-lg space-y-6">
                            <p>Minimalism, at its core, is the art of knowing what to leave out, not what to put in. In the digital realm, this philosophy translates to cleaner interfaces, faster load times, and crucially, better user focus. We often see complex designs cluttering the user experience...</p>
                            <blockquote class="border-l-4 border-primary-teal pl-4 italic text-gray-600 my-8">
                                "Simplicity is the ultimate sophistication." - Leonardo da Vinci
                            </blockquote>
                            <h2 class="text-2xl font-bold text-gray-900 pt-4">The Power of Negative Space</h2>
                            <p>Whitespace, or negative space, is not wasted space. It is a design element that gives your content room to breathe. When building interfaces, generous padding and clear visual hierarchy guide the user effortlessly through the information.</p>
                            <ul class="list-disc list-inside space-y-2 pl-4">
                                <li>Improved Readability and Scannability.</li>
                                <li>Higher perceived quality of content.</li>
                                <li>Reduced cognitive load for the user.</li>
                            </ul>
                            <p>Ultimately, successful minimalist design is about prioritization. It forces us to ask: what is the single most important action or piece of information on this screen?</p>
                        </article>
                    </div>
                </div>`,
            }
        };


        // --- MODAL FUNCTIONS ---

        function closeModal() {
            modalOverlay.classList.add('hidden');
            modalActions.innerHTML = ''; // Clear buttons
        }

        function showModal(title, message, buttons) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalActions.innerHTML = ''; // Clear previous buttons

            buttons.forEach(button => {
                const btn = document.createElement('button');
                btn.textContent = button.text;
                btn.className = 'px-4 py-2 rounded-lg text-sm font-semibold transition duration-150 shadow-md';
                
                // Add specific Tailwind classes for styling (primary/secondary)
                if (button.type === 'primary') {
                     btn.classList.add('bg-primary-teal', 'text-white', 'hover:bg-dark-teal');
                } else if (button.type === 'secondary') {
                     btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                } else if (button.type === 'danger') {
                     btn.classList.add('bg-red-500', 'text-white', 'hover:bg-red-600');
                }

                btn.onclick = (e) => {
                    e.preventDefault();
                    closeModal();
                    if (button.action) {
                        button.action();
                    }
                };
                modalActions.appendChild(btn);
            });

            modalOverlay.classList.remove('hidden');
        }

        // --- BUTTON HANDLERS FOR MODAL ---

        function handleNewCodeClick(event) {
            event.preventDefault();
            // Close all submenus before showing modal
            closeAllSubMenus(); 

            showModal(
                'สร้างโค้ดใหม่',
                'คุณต้องการล้างโค้ดปัจจุบันและเริ่มต้นสร้างโค้ดใหม่หรือไม่? การดำเนินการนี้ไม่สามารถยกเลิกได้',
                [
                    { text: 'ยกเลิก', type: 'secondary', action: () => console.log('New Code Cancelled') },
                    { text: 'ยืนยัน', type: 'primary', action: () => {
                        // Placeholder: Logic to clear code, reset state, and proceed
                        // In a real app, this would be a deep state reset
                        console.log('Code reset confirmed! Ready for new code.');
                    }}
                ]
            );
        }

        function handleLogoutClick(event) {
            event.preventDefault();
            // Close all submenus before showing modal
            closeAllSubMenus(); 

            showModal(
                'ออกจากระบบ',
                'คุณแน่ใจหรือไม่ว่าต้องการออกจากระบบ?',
                [
                    { text: 'ยกเลิก', type: 'secondary', action: () => console.log('Logout Cancelled') },
                    // Changed 'ตกลง' to primary type for visual weight
                    { text: 'ตกลง', type: 'primary', action: () => {
                        // Placeholder: Logic to handle actual logout process
                        console.log('Logout confirmed!');
                    }}
                ]
            );
        }

        // --- SUBMENU TOGGLE FUNCTIONS ---

        function closeAllSubMenus() {
            projectHistorySubmenu.classList.add('hidden');
            projectHistoryButton.classList.remove('active');
            aiSettingsSubmenu.classList.add('hidden');
            aiSettingsButton.classList.remove('active');
            userManualSubmenu.classList.add('hidden');
            userManualButton.classList.remove('active');
            designTemplatesSubmenu.classList.add('hidden');
            designTemplatesButton.classList.remove('active');
        }

        // Function to handle clicking outside the sub-menu to close it
        document.addEventListener('click', (event) => {
            // Check if the click is outside all submenus AND their buttons
            const isClickInsideMenuArea = projectHistoryButton.contains(event.target) || 
                                          projectHistorySubmenu.contains(event.target) ||
                                          aiSettingsButton.contains(event.target) ||
                                          aiSettingsSubmenu.contains(event.target) ||
                                          userManualButton.contains(event.target) ||
                                          userManualSubmenu.contains(event.target) ||
                                          designTemplatesButton.contains(event.target) ||
                                          designTemplatesSubmenu.contains(event.target) ||
                                          newCodeButton.contains(event.target) || // Include new code button here
                                          logoutButton.contains(event.target); // Include logout button here

            if (!isClickInsideMenuArea && !modalOverlay.contains(event.target) && !modalOverlay.classList.contains('hidden')) {
                 // Do nothing if modal is open and click is outside modal
            } else if (!isClickInsideMenuArea && modalOverlay.classList.contains('hidden')) {
                // Close submenus if modal is closed and click is outside all menus
                closeAllSubMenus();
            }
        });

        // Function to toggle project sub-menu visibility
        function toggleProjectSubMenu(event) {
            event.preventDefault();
            closeModal();
            closeAllSubMenus(); // Close all others first
            const isHidden = projectHistorySubmenu.classList.contains('hidden');

            if (isHidden) {
                projectHistorySubmenu.classList.remove('hidden');
                projectHistoryButton.classList.add('active'); 
            } else {
                projectHistorySubmenu.classList.add('hidden');
                projectHistoryButton.classList.remove('active');
            }
        }

        // Function to toggle AI Settings sub-menu visibility
        function toggleAiSettingsSubMenu(event) {
            event.preventDefault();
            closeModal();
            closeAllSubMenus(); // Close all others first
            
            const isHidden = aiSettingsSubmenu.classList.contains('hidden');

            if (isHidden) {
                aiSettingsSubmenu.classList.remove('hidden');
                aiSettingsButton.classList.add('active'); 
            } else {
                aiSettingsSubmenu.classList.add('hidden');
                aiSettingsButton.classList.remove('active');
            }
        }

        // Function to toggle User Manual sub-menu visibility
        function toggleUserManualSubMenu(event) {
            event.preventDefault();
            closeModal();
            closeAllSubMenus(); // Close all others first
            
            const isHidden = userManualSubmenu.classList.contains('hidden');

            if (isHidden) {
                userManualSubmenu.classList.remove('hidden');
                userManualButton.classList.add('active'); 
            } else {
                userManualSubmenu.classList.add('hidden');
                userManualButton.classList.remove('active');
            }
        }

        // Function to toggle Design Templates sub-menu visibility
        function toggleDesignTemplatesSubMenu(event) {
            event.preventDefault();
            closeModal();
            closeAllSubMenus(); // Close all others first
            
            const isHidden = designTemplatesSubmenu.classList.contains('hidden');

            if (isHidden) {
                designTemplatesSubmenu.classList.remove('hidden');
                designTemplatesButton.classList.add('active');
            } else {
                designTemplatesSubmenu.classList.add('hidden');
                designTemplatesButton.classList.remove('active');
            }
        }

        // Define class sets for clarity in JS
        const tabActiveStyle = ['active-tab']; 
        const tabInactiveStyle = ['inactive-tab']; 
        const tabCommonClasses = ['px-4', 'py-1.5', 'text-sm', 'font-medium', 'rounded-full', 'transition', 'duration-150']; 

        // Helper function for cleanup
        function cleanUpClasses(element) {
             // Remove all classes that define color, background, scale, shadow from the old scheme and current active/inactive states
             element.classList.remove('bg-primary-teal', 'text-white', 'hover:bg-dark-teal', 'shadow-lg', 'bg-gray-200', 'text-gray-700', 'hover:bg-gray-300', 'active-tab', 'inactive-tab', 'active');
             element.classList.add(...tabCommonClasses);
        }


        // ฟังก์ชันสลับหน้า Code / Preview (Layout 3)
        function switchView(viewName) {
            
            // 1. Update Group Glow
            // Remove glow first
            tabGroupContainer.classList.remove('active-group'); 
            // Add glow back after a short delay to trigger the transition effect when switching
            setTimeout(() => {
                tabGroupContainer.classList.add('active-group');
            }, 50);


            // 2. Update button styles
            if (viewName === 'code') {
                // Tab Code (Active: Border/Text only, no background fill)
                cleanUpClasses(tabCode);
                tabCode.classList.add(...tabActiveStyle); 
                tabCode.classList.add('shadow-lg'); // Keep shadow for active tab for subtle depth

                // Tab Preview (Inactive: Light gray fill)
                cleanUpClasses(tabPreview);
                tabPreview.classList.add(...tabInactiveStyle);

                // 3. Update view panels (No change here)
                viewCode.classList.remove('hidden');
                viewPreview.classList.add('hidden');
                outputPanel.classList.remove('bg-gray-100');
                outputPanel.classList.add('bg-gray-900');
                copyButton.classList.remove('hidden');
            } else {
                // Tab Preview (Active: Border/Text only, no background fill)
                cleanUpClasses(tabPreview);
                tabPreview.classList.add(...tabActiveStyle);
                tabPreview.classList.add('shadow-lg');

                // Tab Code (Inactive: Light gray fill)
                cleanUpClasses(tabCode);
                tabCode.classList.add(...tabInactiveStyle);

                // 3. Update view panels (No change here)
                viewPreview.classList.remove('hidden');
                viewCode.classList.add('hidden');
                outputPanel.classList.remove('bg-gray-900');
                outputPanel.classList.add('bg-gray-100');
                copyButton.classList.add('hidden');
            }
        }
        
        // --- NEW FUNCTION: Load Project Content ---
        function loadProjectDesign(event) {
            event.preventDefault();
            closeAllSubMenus(); // Close the project history menu

            const projectId = event.currentTarget.getAttribute('data-project');
            const data = projectData[projectId];

            if (data) {
                // 1. Load the new content
                codeContent.textContent = data.code;
                viewPreview.innerHTML = data.preview;

                // 2. Switch view to preview
                switchView('preview');
                
                // Optional: Scroll to top of preview (in a real app, this is helpful)
                viewPreview.scrollTop = 0;
            } else {
                console.error(`Project ID "${projectId}" not found.`);
                showModal('ข้อผิดพลาด', 'ไม่พบข้อมูลโครงการที่เลือก กรุณาลองใหม่', [{ text: 'ปิด', type: 'secondary' }]);
            }
        }

        // Function to copy code to clipboard
        function copyCode() {
            if (viewCode.classList.contains('hidden')) {
                // หากไม่ได้อยู่ใน Code View ไม่ทำอะไร
                return;
            }

            const textToCopy = codeContent.textContent || codeContent.innerText;
            
            // ใช้ document.execCommand('copy') สำหรับคัดลอกในสภาพแวดล้อม iFrame
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            let success = false;
            try {
                success = document.execCommand('copy');
            } catch (err) {
                console.error('Failed to copy text', err);
            }
            
            document.body.removeChild(tempTextArea);

            // Provide visual feedback (Change icon and title)
            if (success) {
                // Trigger glow effect for a moment
                copyButton.classList.add('active'); 

                const originalTitle = copyButton.getAttribute('title');
                // Checkmark icon (SVG)
                copyButton.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`;
                copyButton.setAttribute('title', 'คัดลอกแล้ว!');

                setTimeout(() => {
                    // Restore original icon, title, and remove active class
                    copyButton.innerHTML = `<svg id="copy-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-2m-4-4l-4-4m0 0l-4 4m4-4v12"></path></svg>`;
                    copyButton.setAttribute('title', originalTitle);
                    copyButton.classList.remove('active'); 
                }, 2000);
            } else {
                // In case of failure, use a message box (not alert()) for feedback
                const feedbackMessage = document.createElement('div');
                feedbackMessage.textContent = 'ไม่สามารถคัดลอกโค้ดได้ กรุณาลองคัดลอกด้วยตนเอง';
                feedbackMessage.className = 'fixed bottom-4 right-4 bg-red-600 text-white p-3 rounded-lg shadow-xl z-50 transition duration-300 transform translate-y-full';
                document.body.appendChild(feedbackMessage);

                // Animate in and out
                setTimeout(() => {
                    feedbackMessage.classList.remove('translate-y-full');
                    feedbackMessage.classList.add('translate-y-0');
                }, 10);
                
                setTimeout(() => {
                    feedbackMessage.classList.remove('translate-y-0');
                    feedbackMessage.classList.add('translate-y-full');
                    feedbackMessage.addEventListener('transitionend', () => feedbackMessage.remove());
                }, 3000);
            }
        }

        // EVENT LISTENERS
        tabCode.addEventListener('click', () => switchView('code'));
        tabPreview.addEventListener('click', () => switchView('preview'));
        copyButton.addEventListener('click', copyCode);
        
        // MODAL TRIGGERS
        newCodeButton.addEventListener('click', handleNewCodeClick);
        logoutButton.addEventListener('click', handleLogoutClick);

        // SUBMENU TRIGGERS
        projectHistoryButton.addEventListener('click', toggleProjectSubMenu); 
        aiSettingsButton.addEventListener('click', toggleAiSettingsSubMenu);
        userManualButton.addEventListener('click', toggleUserManualSubMenu); 
        designTemplatesButton.addEventListener('click', toggleDesignTemplatesSubMenu);
        
        // NEW PROJECT HISTORY ITEM LISTENERS
        projectItems.forEach(item => {
            item.addEventListener('click', loadProjectDesign);
        });

        // ตั้งค่าเริ่มต้นเมื่อโหลดหน้า
        window.onload = function() {
            switchView('code'); // แสดงโค้ดเริ่มต้น
        };
    </script>
</body>
</html>
